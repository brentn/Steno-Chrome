
Translator tests

Listener for cursor moved:
- onSurroundingTextChanged

Better dictionary choosing gui


Translator algorithm:
if (queue.isEmpty)
  translateSimpleStroke

else (queue not empty)
  lookup fullstroke
  if (found)
    result.undo_chars = queue.translation.length
    queue = lookup(fullstroke) + current state
    format queue
    result = queue
    if (not ambiguous)
      commit queue

  else (not found)
    commit queue
    translateSimpleStroke


translateSimpleStroke     
  queue = lookup(stroke) + current state
  if (found)
    format queue
  else (not found)
    queue = raw stroke
  result = queue;
  if (!found || !ambiguous)
    commit queue
